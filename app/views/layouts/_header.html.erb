<header  role="banner" id="doc-header">
  <div id="header" class="container navbar" style="height:100px;width:800px;text-align: center;margin-bottom:0">dddd</div>
  <div id="menu" class="container navbar navbar-inverse">
    <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
      </button>
     <!-- <a href="/" class="navbar-brand" data-bind="text:module.navBar.title"></a>-->
    </div>
    <nav class="collapse navbar-collapse ">
      <ul id="navbar" class="nav navbar-nav"  data-bind="foreach:navBar">
        <li>
          <a data-bind="link:obj.code"></a>
          <ul class="hide sub-menu non-style" data-bind="foreach:children">
            <li>
              <ul class="sub-menu-item non-style">
                <li class="navbar-item-title" data-bind="text:title"></li>
                <li class="navbar-item-title" data-bind="text:sub_title"></li>
                <li><img class="navbar-item-title" data-bind="attr:{src:image_url}"/></li>
                <ul class="non-style" data-bind="splitList:{data:description, seperator:'|'}">

                </ul>
                <li><a data-bind="link:info_product"></a></li>
                <li><a data-bind="link:info_price"></a></li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </nav>
  </div>
</header>

<% content_for :js do %>
<script type="text/javascript">
    $(function(){
        var subMenuItemWidth = $('#navbar ul.sub-menu > li:first-child').width();
        $('#navbar ul.sub-menu').each(function(index, element){
            $this =  $(this);
            $this.css('width', subMenuItemWidth * $this.children().length + ($this.children().length * 2));
        });

        $('#navbar>li>a').hover(function(){
           $(this).next().removeClass('hide');
        },
        function(){
            $(this).next().addClass('hide');
        });

       $('#navbar ul.sub-menu').hover(
               function(event){
                    $(this).removeClass('hide');
               },
               function(){
                   $(this).addClass('hide');
               }
       );

    })
</script>

<% end %>